<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Inventory Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg: #0f172a;
    --panel: #111827;
    --card: #1f2933;
    --accent: #3b82f6;
    --danger: #ef4444;
    --text: #e5e7eb;
    --muted: #9ca3af;
}

* {
    box-sizing: border-box;
    font-family: "Segoe UI", system-ui, sans-serif;
}

body {
    margin: 0;
    background: linear-gradient(135deg, #020617, #0f172a);
    color: var(--text);
}

/* Layout */
.dashboard {
    display: grid;
    grid-template-columns: 260px 1fr;
    min-height: 100vh;
}

.sidebar {
    background: var(--panel);
    padding: 24px;
    border-right: 1px solid #1f2937;
}

.sidebar h1 {
    font-size: 1.4rem;
    margin-bottom: 32px;
}

.sidebar button {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    border: none;
    background: var(--card);
    color: var(--text);
    font-size: 0.95rem;
    cursor: pointer;
    border-radius: 6px;
}

.sidebar button:hover {
    background: var(--accent);
}

/* Main */
.main {
    padding: 32px;
}

.section {
    display: none;
}

.section.active {
    display: block;
}

.card {
    background: var(--card);
    padding: 24px;
    border-radius: 10px;
    margin-bottom: 24px;
}

.card h2 {
    margin-bottom: 16px;
}

/* Forms */
input {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border-radius: 6px;
    border: none;
    background: #020617;
    color: var(--text);
}

button.primary {
    background: var(--accent);
    color: white;
    padding: 10px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #374151;
    text-align: left;
}

.low {
    color: var(--danger);
    font-weight: 600;
}
</style>
</head>

<body>

<div class="dashboard">

    <!-- Sidebar -->
    <div class="sidebar">
        <h1>Admin Portal</h1>
        <button onclick="show('add')">Add Product</button>
        <button onclick="show('inventory')">Sorted Inventory</button>
        <button onclick="show('lowstock')">Low Stock</button>
        <button onclick="show('search')">Search Product</button>
        <button onclick="show('update')">Update Stock</button>
    </div>

    <!-- Main Content -->
    <div class="main">

        <!-- Add Product -->
        <div id="add" class="section active card">
            <h2>Add Product</h2>
            <input id="addId" placeholder="Product ID">
            <input id="addName" placeholder="Name">
            <input id="addQty" placeholder="Quantity">
            <input id="addPrice" placeholder="Price">
            <button class="primary" onclick="addProduct()">Add</button>
        </div>

        <!-- Inventory -->
        <div id="inventory" class="section card">
            <h2>Sorted Inventory</h2>
            <table id="inventoryTable"></table>
        </div>

        <!-- Low Stock -->
        <div id="lowstock" class="section card">
            <h2>Low Stock Products</h2>
            <table id="lowStockTable"></table>
        </div>

        <!-- Search -->
        <div id="search" class="section card">
            <h2>Search Product</h2>
            <input id="searchId" placeholder="Enter Product ID">
            <button class="primary" onclick="searchProduct()">Search</button>
            <div id="searchResult"></div>
        </div>

        <!-- Update -->
        <div id="update" class="section card">
            <h2>Update Stock</h2>
            <input id="updateId" placeholder="Product ID">
            <input id="updateQty" placeholder="New Quantity">
            <button class="primary" onclick="updateStock()">Update</button>
        </div>

    </div>
</div>

<script>
// ========================
// Data Structures
// ========================
const productMap = new Map();

// ========================
// Persistence (File Handling)
// ========================
function save() {
    localStorage.setItem("inventory", JSON.stringify([...productMap]));
}

function load() {
    const data = JSON.parse(localStorage.getItem("inventory"));
    if (data) data.forEach(([id, p]) => productMap.set(id, p));
}

// ========================
// Core Logic
// ========================
function addProduct() {
    const id = Number(addId.value);
    if (productMap.has(id)) return alert("Product ID already exists");

    productMap.set(id, {
        id,
        name: addName.value,
        quantity: Number(addQty.value),
        price: Number(addPrice.value)
    });

    save();
    alert("Product added");
}

function sortedProducts() {
    return [...productMap.values()].sort((a,b)=>a.name.localeCompare(b.name));
}

function lowStock() {
    return [...productMap.values()].filter(p => p.quantity < 5);
}

function searchProduct() {
    const p = productMap.get(Number(searchId.value));
    searchResult.innerHTML = p
        ? `ID: ${p.id}<br>Name: ${p.name}<br>Qty: ${p.quantity}<br>Price: ${p.price}`
        : "Product not found";
}

function updateStock() {
    const id = Number(updateId.value);
    if (!productMap.has(id)) return alert("Product not found");
    productMap.get(id).quantity = Number(updateQty.value);
    save();
    alert("Stock updated");
}

// ========================
// UI Helpers
// ========================
function show(id) {
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    if (id === "inventory") renderInventory();
    if (id === "lowstock") renderLowStock();
}

function renderInventory() {
    inventoryTable.innerHTML = `
        <tr><th>ID</th><th>Name</th><th>Qty</th><th>Price</th></tr>
        ${sortedProducts().map(p=>`
            <tr>
                <td>${p.id}</td>
                <td>${p.name}</td>
                <td class="${p.quantity<5?'low':''}">${p.quantity}</td>
                <td>${p.price}</td>
            </tr>`).join("")}`;
}

function renderLowStock() {
    lowStockTable.innerHTML = `
        <tr><th>ID</th><th>Name</th><th>Qty</th></tr>
        ${lowStock().map(p=>`
            <tr>
                <td>${p.id}</td>
                <td>${p.name}</td>
                <td class="low">${p.quantity}</td>
            </tr>`).join("")}`;
}

// ========================
// Init
// ========================
load();
if (productMap.size === 0) {
    addProductAuto(101,"Laptop",10,120000);
    addProductAuto(102,"Mouse",3,1500);
    addProductAuto(103,"Keyboard",2,3000);
}

function addProductAuto(id,name,qty,price){
    productMap.set(id,{id,name,quantity:qty,price});
    save();
}
</script>

</body>
</html>
