<!DOCTYPE html>
<html>
<head>
  <title>Inventory Management System Demo</title>
  <style>
    body { font-family: Arial; background: #f4f4f4; padding: 20px; }
    h1, h2 { color: #333; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #333; padding: 8px; text-align: left; }
    th { background: #555; color: #fff; }
    input { margin: 5px; padding: 5px; }
    button { padding: 5px 10px; margin: 5px; cursor: pointer; }
    .low-stock { color: red; font-weight: bold; }
    .action-btn { padding: 3px 6px; margin: 0 2px; cursor: pointer; }
  </style>
</head>
<body>
<h1>Inventory Management System Demo</h1>

<h2>Add / Update Product</h2>
ID: <input type="number" id="id">
Name: <input type="text" id="name">
Qty: <input type="number" id="qty">
Price: <input type="number" id="price">
<button onclick="addOrUpdateProduct()">Add / Update</button>
<button onclick="clearFields()">Clear</button>

<h2>Search Product by ID</h2>
ID: <input type="number" id="searchId">
<button onclick="searchProduct()">Search</button>
<p id="searchResult"></p>

<h2>Inventory</h2>
<table id="productTable">
  <tr><th>ID</th><th>Name</th><th>Qty</th><th>Price</th><th>Actions</th></tr>
</table>

<h2>Low Stock Products (&lt;5)</h2>
<ul id="lowStockList"></ul>

<script>
let products = JSON.parse(localStorage.getItem("products")) || [];

// Save to "backend"
function saveData() {
  localStorage.setItem("products", JSON.stringify(products));
}

// Add or Update Product
function addOrUpdateProduct() {
  let id = parseInt(document.getElementById("id").value);
  let name = document.getElementById("name").value.trim();
  let qty = parseInt(document.getElementById("qty").value);
  let price = parseFloat(document.getElementById("price").value);

  if(!id || !name || isNaN(qty) || isNaN(price)){
    alert("Please fill all fields correctly!");
    return;
  }

  // Check if product exists
  let existing = products.find(p => p.id === id);
  if(existing){
    existing.name = name;
    existing.qty = qty;
    existing.price = price;
    alert("Product updated!");
  } else {
    products.push({id,name,qty,price});
    alert("Product added!");
  }

  products.sort((a,b)=>a.name.localeCompare(b.name)); // mimic BST
  saveData();
  renderProducts();
  clearFields();
}

// Clear input fields
function clearFields(){
  document.getElementById("id").value="";
  document.getElementById("name").value="";
  document.getElementById("qty").value="";
  document.getElementById("price").value="";
}

// Render products table
function renderProducts(){
  let table = document.getElementById("productTable");
  table.innerHTML = "<tr><th>ID</th><th>Name</th><th>Qty</th><th>Price</th><th>Actions</th></tr>";
  let lowStockHTML = "";

  products.forEach((p,index)=>{
    table.innerHTML += `<tr>
      <td>${p.id}</td>
      <td>${p.name}</td>
      <td>${p.qty}</td>
      <td>${p.price}</td>
      <td>
        <button class="action-btn" onclick="editProduct(${index})">Edit</button>
        <button class="action-btn" onclick="deleteProduct(${index})">Delete</button>
      </td>
    </tr>`;

    if(p.qty<5) lowStockHTML += `<li class="low-stock">${p.name} (${p.qty})</li>`;
  });

  document.getElementById("lowStockList").innerHTML = lowStockHTML;
}

// Edit product
function editProduct(index){
  let p = products[index];
  document.getElementById("id").value = p.id;
  document.getElementById("name").value = p.name;
  document.getElementById("qty").value = p.qty;
  document.getElementById("price").value = p.price;
}

// Delete product
function deleteProduct(index){
  if(confirm("Delete this product?")){
    products.splice(index,1);
    saveData();
    renderProducts();
  }
}

// Search product by ID
function searchProduct(){
  let id = parseInt(document.getElementById("searchId").value);
  let p = products.find(prod=>prod.id===id);
  if(p){
    document.getElementById("searchResult").innerText = `ID: ${p.id} | Name: ${p.name} | Qty: ${p.qty} | Price: ${p.price}`;
  } else {
    document.getElementById("searchResult").innerText = "Product not found!";
  }
}

// Preload demo products if empty
if(products.length===0){
  products = [
    {id:101,name:"Laptop",qty:10,price:120000},
    {id:102,name:"Mouse",qty:3,price:1500},
    {id:103,name:"Keyboard",qty:2,price:3000},
    {id:104,name:"Monitor",qty:7,price:20000},
    {id:105,name:"USB Cable",qty:2,price:300}
  ];
  saveData();
}

renderProducts();
</script>
</body>
</html>
